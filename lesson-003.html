<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plantilla 003 | Exprésate</title>
  <link rel="stylesheet" href="layout.css" />
  <link rel="stylesheet" href="theme-light.css" />
</head>
<body data-lesson-id="template-003">

  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">Exprésate</div>
      <a class="pill" href="lessons.html">Lecciones</a>
    </div>
  </div>

  <div class="shell">

    <!-- LEFT: NAV -->
    <aside class="panel sidebar">
      <h3>Plantillas</h3>
      <nav class="sidebar">
        <a href="index.html">Inicio</a>
        <a href="lessons.html">Lecciones</a>
        <a href="curso.html">Curso</a>
        <a href="lesson-001.html">Plantilla 001 — Pronombres + Verbos</a>
        <a href="lesson-002.html">Plantilla 002 — Preguntas (Do/Does)</a>
        <a class="active" href="lesson-003.html">Plantilla 003 — Negaciones (Don’t/Doesn’t)</a>
      </nav>
    </aside>

    <!-- CENTER: CONTENT -->
    <main class="content">
      <h1>Plantilla 003</h1>
      <p class="sub">Negaciones en presente: <strong>Don't / Doesn't</strong></p>

      <div class="block">
        <h2>Objetivo</h2>
        <p>Negar oraciones simples en inglés usando <strong>don't</strong> y <strong>doesn't</strong>.</p>
        <p><strong>No memorices reglas. Sigue el patrón.</strong></p>
      </div>

      <div class="block">
        <h2>1) Mapeo rápido</h2>
        <div class="mapeo">
  <div class="map-grid">
    <div class="map-card dont">
      <div class="map-badge">DON’T</div>
      <div class="map-line"><strong>I</strong> / You / We / They</div>
      <div class="map-sub">I / You / We / They → don’t</div>
    </div>

    <div class="map-card doesnt">
      <div class="map-badge">DOESN’T</div>
      <div class="map-line">He / <strong>She</strong></div>
      <div class="map-sub">He / She → doesn’t</div>
    </div>
  </div>

  <div class="map-rule">
    <span class="chip">Regla</span>
    En negación, el verbo va en forma base: <strong>work</strong>
    <span class="muted">(no <s>works</s>)</span>
  </div>

  <div class="map-example">
    <div class="good">
      <span class="icon">✅</span>
      <span><strong>She doesn’t work.</strong></span>
    </div>
    <div class="bad">
      <span class="icon">❌</span>
      <span><s>She doesn’t works.</s></span>
    </div>
  </div>
</div>


        <p class="small"><strong>Importante:</strong> En negación, el verbo va en forma base: <strong>work</strong> (no <s>works</s>).</p>
        <p class="small">✅ <strong>She doesn't work.</strong> (no <s>She doesn't works.</s>)</p>
      </div>

      <div class="block">
        <h2>2) Patrón básico</h2>
        <p>Verbo: <strong>work</strong></p>
        <pre>Yo no trabajo.           → I don't work.
Tú no trabajas.          → You don't work.
Él no trabaja.           → He doesn't work.
Ella no trabaja aquí.    → She doesn't work here.
Nosotros no trabajamos.  → We don't work.
Ellos no trabajan aquí.  → They don't work here.</pre>
      </div>

      <div class="block">
        <h2>3) Más verbos (mismo patrón)</h2>

        <h3>Live / Vivir</h3>
        <pre>Yo no vivo aquí.            → I don't live here.
Ella no vive aquí.          → She doesn't live here.
Ellos no viven aquí.        → They don't live here.</pre>

        <h3>Study / Estudiar</h3>
        <pre>Yo no estudio.              → I don't study.
Él no estudia inglés.       → He doesn't study English.
Nosotros no estudiamos hoy. → We don't study today.</pre>
      </div>

      <div class="block">
        <h2>4) Ejemplos</h2>
        <ul>
          <li>Yo no trabajo aquí. → <strong>I don't work here.</strong></li>
          <li>Ella no vive aquí. → <strong>She doesn't live here.</strong></li>
          <li>Ellos no estudian. → <strong>They don't study.</strong></li>
          <li>Él no trabaja hoy. → <strong>He doesn't work today.</strong></li>
        </ul>
      </div>

      <!-- INTERACTIVE PRACTICE -->
      <div class="block practice" id="practice-003">
        <h2>5) Práctica (escribe)</h2>
        <p class="small">Traduce al inglés. Escribe tu respuesta y presiona <strong>Verificar</strong> (o Enter).</p>

        <div class="practice-list">

          <div class="practice-item" data-answer="I don't work.">
            <div class="prompt">1) Yo no trabajo.</div>
            <div class="row">
              <input class="answer" type="text" placeholder="Type in English..." autocomplete="off" />
              <button class="check-btn btn" type="button">Verificar</button>
            </div>
            <div class="feedback" aria-live="polite"></div>
          </div>

          <div class="practice-item" data-answer="She doesn't live here.">
            <div class="prompt">2) Ella no vive aquí.</div>
            <div class="row">
              <input class="answer" type="text" placeholder="Type in English..." autocomplete="off" />
              <button class="check-btn btn" type="button">Verificar</button>
            </div>
            <div class="feedback" aria-live="polite"></div>
          </div>

          <div class="practice-item" data-answer="We don't study.">
            <div class="prompt">3) Nosotros no estudiamos.</div>
            <div class="row">
              <input class="answer" type="text" placeholder="Type in English..." autocomplete="off" />
              <button class="check-btn btn" type="button">Verificar</button>
            </div>
            <div class="feedback" aria-live="polite"></div>
          </div>

          <div class="practice-item" data-answer="They don't work here.">
            <div class="prompt">4) Ellos no trabajan aquí.</div>
            <div class="row">
              <input class="answer" type="text" placeholder="Type in English..." autocomplete="off" />
              <button class="check-btn btn" type="button">Verificar</button>
            </div>
            <div class="feedback" aria-live="polite"></div>
          </div>

          <div class="practice-item" data-answer="He doesn't work today.">
            <div class="prompt">5) Él no trabaja hoy.</div>
            <div class="row">
              <input class="answer" type="text" placeholder="Type in English..." autocomplete="off" />
              <button class="check-btn btn" type="button">Verificar</button>
            </div>
            <div class="feedback" aria-live="polite"></div>
          </div>

        </div>

        <div class="practice-actions">
          <button class="btn" id="checkAll" type="button">Verificar todo</button>
          <button class="btn" id="resetPractice" type="button">Reiniciar</button>
        </div>
      </div>

      <div class="block">
        <h2>6) Práctica (cambia el sujeto)</h2>
        <p class="small">Ejemplo: “Yo no trabajo aquí.” → “She doesn't work here.”</p>
        <ol>
          <li>Yo no vivo aquí.</li>
          <li>Yo no estudio hoy.</li>
          <li>Yo no trabajo mucho.</li>
        </ol>
      </div>

      <div class="block">
        <h2>Audio (pronunciación)</h2>
        <p class="small">Escucha y repite. (Agrega MP3 después en <code>/audio/template-003/</code>)</p>

        <p><strong>I don't work.</strong></p>
        <audio controls preload="none">
          <source src="audio/template-003/i-dont-work.mp3" type="audio/mpeg">
        </audio>

        <p><strong>She doesn't live here.</strong></p>
        <audio controls preload="none">
          <source src="audio/template-003/she-doesnt-live-here.mp3" type="audio/mpeg">
        </audio>
      </div>

      <div class="actions">
        <a class="btn" href="lessons.html">← Volver</a>
        <a class="btn primary" href="#" title="Próximamente">Siguiente →</a>
      </div>

      <p class="small">© <span id="year"></span> Exprésate</p>
    </main>

    <!-- RIGHT: ACTIONS -->
    <aside class="panel right">
      <h3>Acciones</h3>
      <div style="padding:12px 14px;">
        <p id="lessonStatus" class="small">Estado: No completada todavía</p>

        <div class="actions">
          <button id="markComplete" class="btn primary" type="button">
            Marcar como completada
          </button>

          <a class="btn" href="https://forms.gle/REPLACE_ME" target="_blank" rel="noreferrer">
            Hacer el quiz
          </a>
        </div>

        <hr />

        <p class="small">
          Cuando termines, envía el quiz y manda una nota de voz para corregir tu pronunciación.
        </p>

        <div class="actions">
          <a class="btn" href="https://wa.me/REPLACE_ME" target="_blank" rel="noreferrer">Enviar nota de voz (WhatsApp)</a>
        </div>
      </div>
    </aside>

  </div>

  <script src="app.js"></script>

  <!-- PRACTICE VALIDATION (same behavior as lesson-001/002) -->
  <script>
    function normalizeAnswer(s) {
      return (s || "")
        .toLowerCase()
        .trim()
        .replace(/[“”"]/g, '"')
        .replace(/[’‘]/g, "'")
        .replace(/\s+/g, " ")
        .replace(/[.!?]+$/g, ""); // ignore ending punctuation
    }

    function checkItem(item) {
      const input = item.querySelector("input.answer");
      const feedback = item.querySelector(".feedback");
      const expected = item.getAttribute("data-answer") || "";

      const user = input.value;

      if (!user.trim()) {
        feedback.className = "feedback bad";
        feedback.textContent = "Escribe tu respuesta primero.";
        return false;
      }

      const ok = normalizeAnswer(user) === normalizeAnswer(expected);

      if (ok) {
        feedback.className = "feedback ok";
        feedback.textContent = "✅ Correcto";
        item.dataset.status = "ok";
        return true;
      } else {
        feedback.className = "feedback bad";
        feedback.textContent = `❌ Incorrecto. Respuesta: ${expected}`;
        item.dataset.status = "bad";
        return false;
      }
    }

    function resetItem(item) {
      item.querySelector("input.answer").value = "";
      const feedback = item.querySelector(".feedback");
      feedback.className = "feedback";
      feedback.textContent = "";
      delete item.dataset.status;
    }

    document.addEventListener("click", (e) => {
      const btn = e.target.closest(".check-btn");
      if (btn) {
        const item = btn.closest(".practice-item");
        checkItem(item);
        return;
      }

      const checkAll = e.target.closest("#checkAll");
      if (checkAll) {
        const box = checkAll.closest(".practice");
        box.querySelectorAll(".practice-item").forEach(i => checkItem(i));
        return;
      }

      const reset = e.target.closest("#resetPractice");
      if (reset) {
        const box = reset.closest(".practice");
        box.querySelectorAll(".practice-item").forEach(resetItem);
        return;
      }
    });

    document.addEventListener("keydown", (e) => {
      if (e.key !== "Enter") return;
      const input = e.target.closest("input.answer");
      if (!input) return;
      e.preventDefault();
      const item = input.closest(".practice-item");
      checkItem(item);
    });
  </script>
</body>
</html>

